class TFJError extends Error{constructor(t){super(t),this.name="TFJError"}}class TFJ{constructor(){this.json=[],this.version="1.0"}init(t,e){console.log("TFJ init"),e?this.loadJSONWithCaching(t):this.loadJSON(t)}loadJSON(t){let e=new XMLHttpRequest;e.overrideMimeType("application/json"),e.open("GET",t,!0),e.onreadystatechange=()=>{if(4==e.readyState&&"200"==e.status){this.json=JSON.parse(e.responseText);let t=new CustomEvent("JSONLoaded",{detail:{json:this.json}});document.dispatchEvent(t),this.load()}else 4==e.readyState&&"200"!=e.status&&console.error("Error loading JSON:",e.status,e.statusText)},e.send(null)}loadJSONWithCaching(t){let e=localStorage.getItem("TFJ_JSON");if(e)this.json=JSON.parse(e),this.load();else{let n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",t,!0),n.onreadystatechange=()=>{4==n.readyState&&"200"==n.status?(this.json=JSON.parse(n.responseText),localStorage.setItem("TFJ_JSON",JSON.stringify(this.json)),this.load()):4==n.readyState&&"200"!=n.status&&console.error("Error loading JSON:",n.status,n.statusText)},n.send(null)}}getJSON(){return this.json}load(){let t=this.getJSON().find(t=>!0===t.default);if(!t)throw new TFJError("Default language not found");let e=t.data;for(let n in e){let o=e[n];if("object"==typeof o&&o.content){let a=o.selector,l=o.type,s=document.querySelectorAll(a);s.length>0&&s.forEach(t=>{if("text"===l&&(t.textContent=o.content),"select"===l){let e=o.content;for(let n=0;n<e.length;n++)t.options[n].text=e[n]}else"value"===l?t.value=o.content:"placeholder"===l?t.placeholder=o.content:"title"===l?t.title=o.content:"alt"===l?t.alt=o.content:"href"===l?t.href=o.content:"src"===l?t.src=o.content:"disabled"===l&&(t.disabled=o.content)})}}let r=new CustomEvent("languageLoaded",{detail:{language:t.code}});document.dispatchEvent(r)}setLang(t){let e=this.getJSON().find(e=>e.code===t);if(!e)throw new TFJError("Language not found");this.updateContent(e.data);let n=new CustomEvent("languageChanged",{detail:{language:t}});document.dispatchEvent(n)}updateContent(t){for(let e in t){let n=t[e];if("object"==typeof n&&n.content){let o=n.selector,a=n.type,l=document.querySelectorAll(o);l.length>0&&l.forEach(t=>{if("text"===a&&(t.textContent=n.content),"select"===a){let e=n.content;for(let o=0;o<e.length;o++)t.options[o].text=e[o]}else"value"===a?t.value=n.content:"placeholder"===a?t.placeholder=n.content:"title"===a?t.title=n.content:"alt"===a?t.alt=n.content:"href"===a?t.href=n.content:"src"===a?t.src=n.content:"disabled"===a&&(t.disabled=n.content)})}}}getVersion(){return this.version}getLang(){let t=this.getJSON().find(t=>!0===t.default);if(!t)throw new TFJError("Default language not found");return t.code}getLangs(){let t=this.getJSON(),e=[];return t.forEach(t=>{e.push(t.code)}),e}getLangName(t){let e=this.getJSON().find(e=>e.code===t);if(!e)throw new TFJError("Language not found");return e.lang}getLangNames(){let t=this.getJSON(),e=[];return t.forEach(t=>{e.push(t.lang)}),e}}